<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="An Example of Reflection" /><meta property="og:locale" content="en" /><meta name="description" content="I understand reflection but I have never used it to solve a problem" /><meta property="og:description" content="I understand reflection but I have never used it to solve a problem" /><link rel="canonical" href="https://jrdev.io//posts/Reflection/" /><meta property="og:url" content="https://jrdev.io//posts/Reflection/" /><meta property="og:site_name" content="Jr Dev" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-17T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="An Example of Reflection" /><meta name="twitter:site" content="@sigfualt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-04-17T00:00:00-05:00","datePublished":"2021-04-17T00:00:00-05:00","description":"I understand reflection but I have never used it to solve a problem","headline":"An Example of Reflection","mainEntityOfPage":{"@type":"WebPage","@id":"https://jrdev.io//posts/Reflection/"},"url":"https://jrdev.io//posts/Reflection/"}</script><title>An Example of Reflection | Jr Dev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jr Dev"><meta name="application-name" content="Jr Dev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://raw.githubusercontent.com/KamRon-67/jrdev.io/master/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jr Dev</a></div><div class="site-subtitle font-italic">Keeping software simple</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/KamRon-67" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/sigfualt" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cameronyoung','cmmsolutions.io'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>An Example of Reflection</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>An Example of Reflection</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Cameron Young </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Apr 17, 2021, 12:00 AM -0500" >Apr 17, 2021<i class="unloaded">2021-04-17T00:00:00-05:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1173 words">6 min read</span></div></div><div class="post-content"><p>Like most people during covid, I missed my coding groups!!! I use to belong to three or four groups. While they are still around none of my local branches decided to go virtual. So I expanded my options and dropped into any open C# groups. I enjoyed it. Excluding my main coding group I had not been around other non-work devs. We would have talks about bout complex things. One thing that kept popping up was refection. Most of the people I am around are more experienced than me. So every time it was brought up we would just gloss over reflection and we would all laugh about why it was used. While I was laughing, I would get lost in what came next. I understood what reflection was as a concept. Never seeing it in action or using it, limited that understanding. So enough back story this is the what is reflection post.</p><p>Reflection is used when we want to operate on an object during runtime. I like to think of it as creating objects backward. Reflection is a meta-programming feature that many programming languages support. You can write code that inspects other code, the same system, or even itself. It sometimes can modify the behavior of that code or methods during runtime. That is my more technical definition. I was able to come up with that after I figured out my simple example.</p><p><img data-proofer-ignore data-src="https://raw.githubusercontent.com/KamRon-67/jrdev.io/master/assets/img/reflections_201617.jpg" alt="A tree over looking the water" title="TA tree over looking the water" /></p><p>In reflection, we are interested in the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/">types</a> and <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/members">members</a>. Typically in a program, you create objects, call functions, set values for the properties of this class. When using reflection, things are different you have to construct what you are going to reflect on. We are not interested in the instance or its values, properties but we are interested in its type itself. What properties and methods it has. We can call those methods at run time.</p><p>Looking at the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/reflection">Microsoft doc</a>, all I have to do is use the GetType method and bam magic!! That was not enough for me. Seriously there is another <a href="https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/reflection">link</a> with more information. The way it is used and when to use it. Were still things that confused me. So I made a short and useless program. To use reflection to produce an action.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">query</span> <span class="p">=</span> <span class="k">from</span> <span class="n">m</span> <span class="k">in</span> <span class="k">typeof</span><span class="p">(</span><span class="kt">string</span><span class="p">).</span><span class="nf">GetMethods</span><span class="p">()</span>
			<span class="k">where</span> <span class="n">m</span><span class="p">.</span><span class="n">IsStatic</span> <span class="p">==</span> <span class="k">true</span>
			<span class="k">orderby</span> <span class="n">m</span><span class="p">.</span><span class="n">Name</span>
			<span class="k">group</span> <span class="n">m</span> <span class="k">by</span> <span class="n">m</span><span class="p">.</span><span class="n">Name</span> <span class="k">into</span> <span class="n">g</span>
			<span class="k">orderby</span> <span class="n">g</span><span class="p">.</span><span class="nf">Count</span><span class="p">()</span>
			<span class="k">select</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="n">g</span><span class="p">.</span><span class="n">Key</span><span class="p">,</span>
			<span class="n">Overloads</span> <span class="p">=</span> <span class="n">g</span><span class="p">.</span><span class="nf">Count</span><span class="p">()};</span>

			<span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">query</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
			<span class="p">}</span>
</pre></table></code></div></div><p>Here we drilled into the static string class to see how many overloads each method has then ordered them first by the number of overloads then alphabetically. This was a simple example of reflection. The GetMethods method shuffles its order each call. You would not want to depend on it without a constraint. Let’s look at more of a breakdown. A real-world use of reflection would be a unit testing framework. We are not going to create one, but look at how it works in an isolated point. The full code is <a href="https://github.com/KamRon-67/reflectionProj/blob/Master/Program.cs">here</a> If you want to see how to implement a full framework this <a href="https://devblogs.microsoft.com/dotnet/show-dotnet-build-your-own-unit-test-platform-the-true-story-of-net-nanoframework/">blog here</a> is for you.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="n">Type</span> <span class="n">personType</span> <span class="p">=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">Person</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">properties</span> <span class="p">=</span> <span class="n">personType</span><span class="p">.</span><span class="nf">GetProperties</span><span class="p">();</span>

<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">properties</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Property: Type: </span><span class="p">{</span><span class="n">item</span><span class="p">.</span><span class="n">PropertyType</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">
</span>			<span class="p">|</span> <span class="n">Name</span><span class="p">:</span> <span class="p">{</span><span class="n">item</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">");
</span><span class="p">}</span>

<span class="n">Person</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="p">();</span>

<span class="kt">var</span> <span class="n">methods</span> <span class="p">=</span> <span class="n">personType</span><span class="p">.</span><span class="nf">GetMethods</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">methods</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Method: Type: </span><span class="p">{</span><span class="n">item</span><span class="p">.</span><span class="n">ReturnType</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">
</span>			<span class="p">|</span> <span class="n">Name</span> <span class="p">{</span><span class="n">item</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">");
</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="s">"Print"</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">item</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"-------------------------------"</span><span class="p">);</span>
	<span class="nf">AttributeTest</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">Person</span><span class="p">));</span>

	<span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">();</span>
</pre></table></code></div></div><p>Let’s start with the main method. We use the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.type?view=net-5.0">Type</a> class and the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.type?view=net-5.0">typeof</a> method. This will give us the ability to create an instance of our person type. We use the GetMethods method on that instance, now we will get all of the public methods of Person.</p><p>Here we create a person class and a custom <a href="https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/attributes">attribute</a>. By giving it a parameter later we can use set values during our refection process. Putting the “Attribute” in the class name seems to be the standard. I am not a fan as it is a little confusing.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">RunMethodAttribute</span> <span class="p">:</span> <span class="n">Attribute</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="kt">int</span> <span class="n">Count</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>This is our simple class we will use as a stand in object.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">public</span> <span class="kt">string</span> <span class="n">LastName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">public</span> <span class="kt">string</span> <span class="n">Phone</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">public</span> <span class="kt">int</span> <span class="n">ZipCode</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Now we are using our custom attribute, we can set values now and use them later in our reflection call. We will use ours in a loop. You can pass many things to an attribute but you are limited the doc will cover the do’s and don’ts.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="nf">RunMethod</span><span class="p">(</span><span class="n">Count</span> <span class="p">=</span> <span class="m">3</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Print</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">FirstName</span><span class="p">}</span><span class="s"> </span><span class="p">{</span><span class="n">LastName</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="nf">RunMethod</span><span class="p">(</span><span class="n">Count</span> <span class="p">=</span> <span class="m">3</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestMethod</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Hello from TestMethod"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">Move</span><span class="p">(</span><span class="kt">int</span> <span class="n">newZipCode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">ZipCode</span> <span class="p">=</span> <span class="n">newZipCode</span><span class="p">;</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">FirstName</span><span class="p">}</span><span class="s"> </span><span class="p">{</span><span class="n">LastName</span><span class="p">}</span><span class="s"> has been moved to </span><span class="p">{</span><span class="n">newZipCode</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="nf">RunMethod</span><span class="p">(</span><span class="n">Count</span> <span class="p">=</span> <span class="m">1</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">SayHi</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Hi </span><span class="p">{</span><span class="n">FirstName</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Like above we are doing something similar in our linq statement. We are using the type class to get all of the methods of our passed in value of person. Because we are using the type class we can use all the type methods. We are using <a href="https://docs.microsoft.com/en-us/dotnet/api/system.type.getmethods?view=net-5.0">GetMethods</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.attribute.getcustomattribute?view=net-5.0">GetCustomAttribute</a> with our favorite method typeof. Now we are only getting the methods that are of or custom attribute type RunMethodAttribute. With the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.activator?view=net-5.0">Activator</a> class I can be lazy and just use the CreateInstance method. Now we have what I would call our shell object (that is not an official term). Using the type class we are forced to use casting while looping. We can use our attributes to power our loop logic.</p><div class="language-csharp highlighter-rouge"><div class="code-header" text-data="csharp"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="k">static</span> <span class="k">void</span> <span class="nf">AttributeTest</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">// Get the methods</span>
	<span class="kt">var</span> <span class="n">allMethods</span> <span class="p">=</span> <span class="n">type</span><span class="p">.</span><span class="nf">GetMethods</span><span class="p">();</span>
	<span class="kt">var</span> <span class="n">methodsWithAttribute</span> <span class="p">=</span> <span class="n">allMethods</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">m</span> <span class="p">=&gt;</span> <span class="n">m</span><span class="p">.</span><span class="nf">GetCustomAttribute</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">RunMethodAttribute</span><span class="p">))</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span>

	<span class="kt">var</span> <span class="n">obj</span> <span class="p">=</span> <span class="n">Activator</span><span class="p">.</span><span class="nf">CreateInstance</span><span class="p">(</span><span class="n">type</span><span class="p">);</span>

	<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">methodsWithAttribute</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">var</span> <span class="n">attribute</span> <span class="p">=</span> <span class="p">(</span><span class="n">RunMethodAttribute</span><span class="p">)</span><span class="n">item</span><span class="p">.</span><span class="nf">GetCustomAttribute</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">RunMethodAttribute</span><span class="p">));</span>
		<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">item</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s"> run for </span><span class="p">{</span><span class="n">attribute</span><span class="p">.</span><span class="n">Count</span><span class="p">}</span><span class="s"> times"</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">attribute</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
		<span class="p">{</span>
			<span class="n">item</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>For me looking at how something is used in the real world is helpful for me to know other times I may need it. For the longest, I was not able to say when to correctly using refection. I still can’t but I know of real-world moments like this, EF Core and the DBContext class, or loading DLLs using Assembly.LoadFile. That helps me “reflect” on the situation I am currently working on. Then know if reflection should be used.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aspnet-core/" class="post-tag no-text-decoration" >aspnet core</a> <a href="/tags/reflection/" class="post-tag no-text-decoration" >reflection</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=An Example of Reflection - Jr Dev&url=https://jrdev.io//posts/Reflection/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=An Example of Reflection - Jr Dev&u=https://jrdev.io//posts/Reflection/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=An Example of Reflection - Jr Dev&url=https://jrdev.io//posts/Reflection/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Clean-Architecture-Take-Away-Part-1/">Clean Architecture Take Away Part 1</a><li><a href="/posts/Working-With-WebApplicationFactory/">Working With WebApplicationFactory</a><li><a href="/posts/Jumping-Into-Testing/">Using Tests To Speed up FeedBack Loop</a><li><a href="/posts/Intro-To-DI-Aggregation-Association-And-Composition/">Intro To DI, Aggregation Association And Composition</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/prototype-chain/">Prototype Chain</a> <a class="post-tag" href="/tags/tdd/">TDD</a> <a class="post-tag" href="/tags/testing-framework/">Testing Framework</a> <a class="post-tag" href="/tags/visual-studio/">Visual Studio</a> <a class="post-tag" href="/tags/proto/">__proto__</a> <a class="post-tag" href="/tags/aggregation/">Aggregation</a> <a class="post-tag" href="/tags/api/">API</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/simple-api/"><div class="card-body"> <span class="timeago small" >Aug 10, 2020<i class="unloaded">2020-08-10T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Build an ASP.NET Core API in a Few Steps</h3><div class="text-muted small"><p> We are going to create a simple REST API using a compiled language. In this example we will use asp.net core to create an API Server. We will cover the post, get, put and delete actions. There are...</p></div></div></a></div><div class="card"> <a href="/posts/Growing-as-a-dev-during-covid/"><div class="card-body"> <span class="timeago small" >Jan 15, 2021<i class="unloaded">2021-01-15T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Growing as a dev during covid</h3><div class="text-muted small"><p> My first free form blog post is not going to be 100% technical. I knew this time would come. Throughout my short career, I have always seen this similar conversation pop up in some way, “How good ...</p></div></div></a></div><div class="card"> <a href="/posts/strategy-pattern/"><div class="card-body"> <span class="timeago small" >Feb 2, 2021<i class="unloaded">2021-02-02T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Strategy Pattern</h3><div class="text-muted small"><p> I joined this group to improve my programming skills and understanding of software concepts. In this group, there is a book list. One of those recommended books is Head First Design Patterns. In th...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/The-T-In-TDD/" class="btn btn-outline-primary" prompt="Older"><p>The T In TDD</p></a> <a href="/posts/Intro-To-DI-Aggregation-Association-And-Composition/" class="btn btn-outline-primary" prompt="Newer"><p>Intro To DI, Aggregation Association And Composition</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small mb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://jrdev.io//posts/Reflection/'; this.page.identifier = '/posts/Reflection/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://jr-dev-1.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/sigfualt">Cameron Young</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet core</a> <a class="post-tag" href="/tags/prototype-chain/">Prototype Chain</a> <a class="post-tag" href="/tags/tdd/">TDD</a> <a class="post-tag" href="/tags/testing-framework/">Testing Framework</a> <a class="post-tag" href="/tags/visual-studio/">Visual Studio</a> <a class="post-tag" href="/tags/proto/">__proto__</a> <a class="post-tag" href="/tags/aggregation/">Aggregation</a> <a class="post-tag" href="/tags/api/">API</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jrdev.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-149577567-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149577567-1'); }); </script>
